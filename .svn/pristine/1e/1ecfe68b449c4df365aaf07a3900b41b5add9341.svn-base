requirejs.config({
    baseUrl: 'script/lib',
    paths: {
        app: '../app',
        jquery: "jquery-2.2.1.min"
    }
});

// Start the main app logic.
requirejs(['jquery', 'echarts.min', 'properScreen', 'properScreen_css', 'app/index'],
function   ($, echarts, flexble, flexble_css, index) {
    //loaded and can be used here now.
    //首页
    var height = document. documentElement. clientHeight;
	$(document).ready(function(){
		$(".deviceHeight").css("height",height);

		var province = {
			"广东": "guangdong",
			"安徽": "anhui",
			"澳门": "aomen",
			"北京": "beijing",
			"重庆": "chongqing",
			"福建": "fujian",
			"甘肃": "gansu",
			"广西": "guangxi",
			"贵州": "guizhou",
			"海南": "hainan",
			"河北": "hebei",
			"黑龙江": "heilongjiang",
			"河南": "henan",
			"湖北": "hubei",
			"湖南": "hunan",
			"江苏": "jiangsu",
			"江西": "jiangxi",
			"吉林": "jilin",
			"辽宁": "liaoning",
			"内蒙古": "neimenggu",
			"宁夏": "ningxia",
			"青海": "qinghai",
			"山东": "shandong",
			"上海": "shanghai",
			"山西": "shanxi",
			"四川": "sichuan",
			"天津": "tianjin",
			"香港": "xianggang",
			"新疆": "xinjiang",
			"西藏": "xizang",
			"云南": "yunnan",
			"浙江": "zhejiang"
		}
		/*载入国家或地区地图*/
		var myChart = echarts.init(document.getElementById('main'));
    	$.get('geojson/country/china.json', function (chinaJson) {

			echarts.registerMap('china', chinaJson);
			option = {
				backgroundColor: '#ddd',
		        title: {
		            text: '慕思加盟店大中华区分布图',
		            // subtext: 'Data from www.musi.com',
		            sublink: 'http://www.musi.com',
		            left: 'center'
		        },
		        tooltip: {
		            trigger: 'item',
		            showDelay: 0,
		            transitionDuration: 0.2
		        },
		        visualMap: {
		        	type: 'piecewise',
		            left: 'center',
		            top: 40,
		            itemWidth: 30,
		            itemHeight: 20,
		            orient: 'horizontal',
		            itemSymbol: 'rect',
		            pieces: [
			            {min: 1, max: 1,label: '已开发区域'},
	                    {min: 0, max: 0,label: '未开发区域'}
			        ],
			        outOfRange:{
			        	color: '#eee'
			        },
		            color: ['#ffcc66', '#eee']
		        },
		        toolbox: {
		            show: true,
		            //orient: 'vertical',
		            left: 'left',
		            top: 'top',
		            feature: {
		                dataView: {readOnly: false},
		                restore: {},
		                saveAsImage: {}
		            }
		        },
		        series: [
		            {
		                name: '中国地图',
		                type: 'map',
		                roam: true,
		                map: 'china',
		                itemStyle:{
		                    emphasis:{label:{show:true}}
		                },
		                data:[
		                {name: '北京',value: 1 },
                        {name: '天津',value: 1 },
                        {name: '上海',value: 1 },
                        {name: '重庆',value: 1 },
                        {name: '河北',value: 1 },
                        {name: '河南',value: 1 },
                        {name: '云南',value: 1 },
                        {name: '辽宁',value: 1 },
                        {name: '黑龙江',value: 1 },
                        {name: '湖南',value: 1 },
                        {name: '安徽',value: 1 },
                        {name: '山东',value: 1 },
                        {name: '新疆',value: 1 },
                        {name: '江苏',value: 1 },
                        {name: '浙江',value: 1 },
                        {name: '江西',value: 1 },
                        {name: '湖北',value: 1 },
                        {name: '广西',value: 0 },
                        {name: '甘肃',value: 1 },
                        {name: '山西',value: 1 },
                        {name: '内蒙古',value: 0 },
                        {name: '陕西',value: 0 },
                        {name: '吉林',value: 1 },
                        {name: '福建',value: 1 },
                        {name: '贵州',value: 0 },
                        {name: '广东',value: 1 },
                        {name: '青海',value: 1 },
                        {name: '西藏',value: 1 },
                        {name: '四川',value: 1 },
                        {name: '宁夏',value: 1 },
                        {name: '海南',value: 1 },
                        {name: '台湾',value: 1 },
                        {name: '香港',value: 1 },
                        {name: '澳门',value: 1 }
		                ]
		            }
		        ]
		    };

		    myChart.setOption(option);

		    myChart.on('click', function (params) {
		    	var str = params.name;
		    	var name = province[str];
	            location.href = 'province.html?name='+encodeURIComponent(str)+'&id='+name;
		    });
 		})

	})
});
    	
